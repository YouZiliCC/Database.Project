{% extends "base.html" %}
{% block title %}项目展台 - Uniweb{% endblock %}
{% block content %}
    <div class="container">
        <div class="page-header">
            <h2>项目展台</h2>
        </div>
        <div class="mb-16">
            <input type="text"
                   class="search"
                   placeholder="搜索项目名称..."
                   data-list-search
                   data-list-target=".project-list">
            <select class="search" data-sort-target=".project-list">
                <option value="name-asc">名称 ↑</option>
                <option value="name-desc">名称 ↓</option>
            </select>
        </div>
        {% if projects %}
            <div class="grid-container project-list">
                {% for project in projects %}
                    <div class="card project-card">
                        <div class="card-header">
                            {% set project_img = '/static/img/projects/' + project.pid + '.png' %}
                            <img src="{{ project_img }}"
                                 alt="{{ project.pname }}"
                                 class="project-img"
                                 onerror="this.src='/static/img/project.png';">
                            <h3>
                                <a href="{{ url_for('project.project_detail', pid=project.pid) }}">{{ project.pname }}</a>
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="project-meta">
                                <span class="meta-item">
                                    <strong>所属组：</strong>
                                    <a href="{{ url_for('group.group_detail', gid=project.gid) }}">{{ project.group.gname }}</a>
                                </span>
                                <span class="meta-item">
                                    <strong>端口：</strong>{{ project.port }}
                                </span>
                            </div>
                            <div class="project-stars">
                                <span class="star-icon">★</span>
                                <span class="star-count">{{ project.stars|length if project.stars else 0 }}</span>
                                <span class="star-label">Stars</span>
                            </div>
                        </div>
                        <div class="card-footer">
                            <a href="{{ url_for('project.project_detail', pid=project.pid) }}"
                               class="btn btn-sm">查看详情</a>
                            {% if project.port %}
                                <a href="http://pkume.com:{{ project.port }}"
                                   target="_blank"
                                   class="btn btn-sm btn-primary">访问应用</a>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty">暂无项目</div>
        {% endif %}
    </div>
{% endblock %}
