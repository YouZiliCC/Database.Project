# Markdown 支持功能实现

## 📝 概述

系统现在支持在用户、工作组和项目的简介字段中使用 Markdown 格式，提供更丰富的文本展示效果。

## ✨ 实现的功能

### 1. Markdown 渲染
- **后端过滤器**：在 `app.py` 中添加了 `markdown` 模板过滤器
- **支持的扩展**：
  - `extra` - 表格、定义列表等扩展语法
  - `codehilite` - 代码高亮
  - `fenced_code` - 围栏代码块 (```)
  - `nl2br` - 换行自动转 `<br>`
  - `sane_lists` - 更好的列表支持

### 2. 支持的 Markdown 语法

#### 文本格式
```markdown
**粗体文本**
*斜体文本*
~~删除线~~
`行内代码`
```

#### 标题
```markdown
# 一级标题
## 二级标题
### 三级标题
```

#### 列表
```markdown
- 无序列表项 1
- 无序列表项 2

1. 有序列表项 1
2. 有序列表项 2
```

#### 链接和图片
```markdown
[链接文本](https://example.com)
![图片描述](image-url.jpg)
```

#### 代码块
````markdown
```python
def hello():
    print("Hello, World!")
```
````

#### 引用
```markdown
> 这是一段引用文本
```

#### 表格
```markdown
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| 内容1 | 内容2 | 内容3 |
```

#### 分隔线
```markdown
---
```

### 3. 样式优化

在 `style.css` 中添加了完整的 `.markdown-content` 样式类：

- ✅ 标题样式（H1-H6）带下划线
- ✅ 代码块深色背景
- ✅ 引用块左侧蓝色边框
- ✅ 表格边框和样式
- ✅ 链接悬停效果
- ✅ 图片响应式缩放
- ✅ 暗色主题完整支持

### 4. 界面更新

#### 用户详情页 (`user/detail.html`)
- 将 "个人简介" 从表格行移到独立区域
- 添加 📝 图标和 "个人简介" 标题
- 使用 `markdown` 过滤器渲染内容

#### 工作组详情页 (`group/detail.html`)
- 将 "工作组描述" 从标题下方移到独立区域
- 添加 📄 图标和 "工作组描述" 标题
- 添加 👥 和 📦 图标到成员和项目列表

#### 项目详情页 (`project/detail.html`)
- 将 "项目描述" 从表格行移到独立区域
- 添加 📝 图标和 "项目描述" 标题
- 优化布局，描述显示在基本信息和 Docker 配置之间

### 5. 编辑表单提示

在所有编辑表单中添加了 Markdown 支持提示：

- **用户编辑** (`user/edit.html`)
- **组创建/编辑** (`group/create.html`, `group/edit.html`)
- **项目创建/编辑** (`project/create.html`, `project/edit.html`)

提示文本示例：
```html
<small class="form-text text-muted">
    支持 Markdown 格式：**粗体**、*斜体*、`代码`、列表等
</small>
```

## 🎨 样式特点

### 浅色主题
- 标题：深灰色 (#111827)
- 正文：中灰色 (#374151)
- 代码：粉红色 (#e83e8c)，浅灰背景
- 代码块：深色背景 (#1e293b)
- 链接：蓝色 (#0d6efd)

### 暗色主题
- 标题：浅灰白 (#f1f5f9)
- 正文：浅灰 (#cbd5e1)
- 代码：粉红色 (#f472b6)，深色背景
- 代码块：更深背景 (#0f172a)
- 引用：深蓝边框 (#2563eb)

## 📦 依赖

在 `pyproject.toml` 中添加：
```toml
"markdown>=3.7"
```

## 🚀 使用示例

### 用户简介示例
```markdown
## 关于我

我是一名 **全栈开发工程师**，热衷于：

- Web 应用开发
- 数据库设计
- DevOps 实践

### 技能栈
- Python, Flask
- JavaScript, React
- Docker, Kubernetes

联系方式：[GitHub](https://github.com/username)
```

### 项目描述示例
```markdown
# 数据库管理系统

这是一个基于 Flask 的数据库课程项目管理系统。

## 主要功能

1. 用户认证和授权
2. 工作组管理
3. 项目部署和监控

## 技术栈

| 技术 | 版本 |
|------|------|
| Python | 3.13+ |
| Flask | 3.1.2 |
| Docker | Latest |

---

**状态**：🟢 运行中
```

## 📝 注意事项

1. **字符限制**：
   - 用户简介：200 字符
   - 工作组描述：200 字符
   - 项目描述：500 字符

2. **安全性**：使用 `Markup()` 标记为安全 HTML，避免 XSS 攻击

3. **性能**：Markdown 转换在渲染时进行，对于频繁访问的页面可考虑缓存

4. **兼容性**：纯文本内容仍然正常显示，向后兼容

## 🔄 未来优化方向

- [ ] 添加 Markdown 编辑器预览功能
- [ ] 支持更多 Markdown 扩展（如数学公式）
- [ ] 添加内容缓存机制
- [ ] 提供 Markdown 语法帮助文档
- [ ] 支持拖拽上传图片

## 🎯 测试建议

1. 创建/编辑用户、组或项目时输入 Markdown 格式内容
2. 验证各种 Markdown 语法的渲染效果
3. 测试浅色和暗色主题下的显示效果
4. 检查长文本和特殊字符的处理
5. 验证 XSS 防护（输入 `<script>` 等标签）
